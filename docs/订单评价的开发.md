# 订单评价的开发

## 最终效果

![](http://images2015.cnblogs.com/blog/138012/201701/138012-20170126173741831-976304841.png)

## 三个状态

一个简单的“评价”功能，就需要三个状态来管理

- 未评价：用户还没有评价，此时应该显示“评价”按钮，点击之后可以评价
- 评价中：用户点击了“评价”按钮，还未写完评价内容。此时“评价”按钮应该暂时隐藏掉
- 已评价：用户已经评价完成并提交了，此时应该显示“已评价”，并且不可点击

通过一个`state`来保存这三个状态

```jsx
    {
        this.state.commentState === 0
        // 未评价
        ? <button className="btn" onClick={this.showComment.bind(this)}>评价</button>
        :
            this.state.commentState === 1
            // 评价中
            ? ''
            // 已经评价
            : <button className="btn unseleted-btn">已评价</button>
    }
```

## 评价状态的来源

一个订单，最初显示的时候到底处于这三个状态中的哪一个？得有一个数据来源。这个来源就是后端接口返回的数据。在`Item`组件中，我们通过获取传递过来的状态信息，更新到`state`中，这就是来源。

```jsx
    componentDidMount() {
        // 将状态维护到 state 中
        this.setState({
            commentState: this.props.data.commentState
        })
    }
```